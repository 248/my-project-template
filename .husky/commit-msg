#!/usr/bin/env sh

# Huskyスクリプト - commit-msg フック
# コミットメッセージをCommitlintでチェック

. "$(dirname -- "$0")/_/husky.sh"

# commitlintでコミットメッセージをチェック
echo "🔍 コミットメッセージをチェック中..."
npx --no-install commitlint --edit "$1"

# チェック成功時のメッセージ
if [ $? -eq 0 ]; then
  echo "✅ コミットメッセージが規約に準拠しています"
else
  echo "❌ コミットメッセージが規約に準拠していません"
  echo ""
  echo "📝 正しい形式の例:"
  echo "  feat: 新しいログイン機能を追加"
  echo "  fix: パスワードリセットのバグを修正"
  echo "  docs: READMEの設定手順を更新"
  echo ""
  echo "詳細は commitlint.config.cjs を確認してください"
  exit 1
fi