# Goç§»è¡Œæˆ¦ç•¥

## æ¦‚è¦

å°†æ¥çš„ãªãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®Goç§»è¡Œã‚’å‰æã¨ã—ãŸè¨­è¨ˆæˆ¦ç•¥ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚

## ç¾åœ¨ã®è¨­è¨ˆæ€æƒ³

### ç¾åœ¨ã®å¥‘ç´„ãƒ™ãƒ¼ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
packages/
â”œâ”€â”€ api-contracts/                      # ğŸ“ OpenAPIå¥‘ç´„ã®å˜ä¸€ã‚½ãƒ¼ã‚¹
â”‚   â”œâ”€â”€ openapi.yaml                   # ğŸŒ APIä»•æ§˜ï¼ˆè¨€èªéä¾å­˜ï¼‰
â”‚   â””â”€â”€ codegen/
â”‚       â”œâ”€â”€ ts/                        # TypeScriptå¥‘ç´„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
â”‚       â”‚   â”œâ”€â”€ package.json           # zod, openapi-fetchä¾å­˜ã‚’å±€æ‰€åŒ–
â”‚       â”‚   â””â”€â”€ src/generated/
â”‚       â”‚       â”œâ”€â”€ types.ts           # OpenAPI â†’ TypeScriptå‹
â”‚       â”‚       â”œâ”€â”€ schemas.ts         # OpenAPI â†’ Zod schemas
â”‚       â”‚       â””â”€â”€ client.ts          # å‹å®‰å…¨APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚       â””â”€â”€ go/ (å°†æ¥)                  # Goå¥‘ç´„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ï¼ˆæº–å‚™æ¸ˆã¿ï¼‰
â”‚           â”œâ”€â”€ oapi-codegen.yaml      # ç”Ÿæˆè¨­å®š
â”‚           â””â”€â”€ contract.gen.go        # OpenAPI â†’ Go structs
â”‚
â”œâ”€â”€ shared/                            # ğŸƒ è»½é‡ãƒ»è¨€èªéä¾å­˜ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â””â”€â”€ src/                          # ä¾å­˜é–¢ä¿‚ã‚¼ãƒ­ï¼ˆç´”ç²‹ï¼‰
â”‚
apps/
â”œâ”€â”€ frontend/ â†’ @template/api-contracts-ts
â””â”€â”€ backend/  â†’ @template/api-contracts-ts
```

### è²¬å‹™åˆ†é›¢ã®è¨­è¨ˆåŸå‰‡

**ğŸ“ api-contractsï¼ˆå¥‘ç´„å°‚ç”¨ï¼‰:**

- OpenAPIä»•æ§˜ã®ç®¡ç†ã¨ç”Ÿæˆç‰©
- TypeScript/Goä¸¡æ–¹ã®å¥‘ç´„å®Ÿè£…ã‚’æä¾›
- é‡ã„ä¾å­˜é–¢ä¿‚ï¼ˆzod, openapi-fetchï¼‰ã‚’å±€æ‰€åŒ–

**ğŸƒ sharedï¼ˆè»½é‡ãƒ»ç´”ç²‹ï¼‰:**

- è¨€èªéä¾å­˜ã®ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã®ã¿
- ä¾å­˜é–¢ä¿‚ã‚¼ãƒ­ã‚’ç¶­æŒ
- ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ç„¡é–¢ä¿‚ãªå…±é€šæ©Ÿèƒ½

**ğŸ¯ appsï¼ˆå®Ÿè£…ï¼‰:**

- å¥‘ç´„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‹ã‚‰å‹ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
- å®Ÿè£…ã«å°‚å¿µã€å‹å®šç¾©ã¯å¥‘ç´„ã«å§”è­²

## Goç§»è¡Œæ™‚ã®å¤‰æ›´ç‚¹

### 1. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å®Ÿè£…ã®å®Œå…¨ç½®æ›

**ç¾åœ¨ (TypeScript + Hono):**

```typescript
import { z } from 'zod'
import { OpenAPIHono } from '@hono/zod-openapi'

const healthCheckSchema = z.object({
  message: z.string(),
  version: z.string(),
  status: z.string(),
  timestamp: z.string(),
})

app.openapi(healthCheckRoute, c => {
  return c.json({
    message: 'Project Template API Server',
    version: '0.1.0',
    status: 'healthy',
    timestamp: new Date().toISOString(),
  })
})
```

**å°†æ¥ (Go + Gin):**

```go
type HealthCheckResponse struct {
    Message   string `json:"message" binding:"required"`
    Version   string `json:"version" binding:"required"`
    Status    string `json:"status" binding:"required"`
    Timestamp string `json:"timestamp" binding:"required"`
}

func healthCheck(c *gin.Context) {
    response := HealthCheckResponse{
        Message:   "Project Template API Server",
        Version:   "0.1.0",
        Status:    "healthy",
        Timestamp: time.Now().Format(time.RFC3339),
    }
    c.JSON(200, response)
}
```

### 2. å‹ç”Ÿæˆã®è¨€èªåˆ¥å¯¾å¿œ

**ç¾åœ¨ï¼ˆTypeScriptå…±é€šï¼‰:**

```bash
# å¥‘ç´„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§TypeScriptå‹ç”Ÿæˆ
pnpm codegen  # â†’ packages/api-contracts/codegen/ts/src/generated/
```

**Goç§»è¡Œæ™‚ï¼ˆè¨€èªåˆ¥ç”Ÿæˆï¼‰:**

```bash
# TypeScriptå¥‘ç´„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
pnpm gen:ts   # â†’ packages/api-contracts/codegen/ts/src/generated/

# Goå¥‘ç´„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ï¼ˆæ–°è¦è¿½åŠ ï¼‰
pnpm gen:go   # â†’ packages/api-contracts/codegen/go/contract.gen.go
```

### 3. é–‹ç™ºä½“é¨“ã®ä¿æŒ

**å¥‘ç´„é§†å‹•é–‹ç™ºã¯ç¶™ç¶š:**

1. `packages/api-contracts/openapi.yaml` ã§APIè¨­è¨ˆ
2. ãƒ•ãƒ­ãƒ³ãƒˆ: TypeScriptå¥‘ç´„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ â†’ å‹å®‰å…¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
3. ãƒãƒƒã‚¯: Goå¥‘ç´„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ â†’ å‹å®‰å…¨ãƒãƒ³ãƒ‰ãƒ©

**å‹å®‰å…¨æ€§ã¯åŒæ–¹ã§ä¿æŒ:**

- ãƒ•ãƒ­ãƒ³ãƒˆ: `@template/api-contracts-ts` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
- ãƒãƒƒã‚¯: `packages/api-contracts/codegen/go/` ç”Ÿæˆç‰©

## ç§»è¡Œæ‰‹é †

### ãƒ•ã‚§ãƒ¼ã‚º0: æº–å‚™æœŸé–“ï¼ˆå®Œäº†æ¸ˆã¿ï¼‰

- [x] å¥‘ç´„ãƒ™ãƒ¼ã‚¹è¨­è¨ˆã®ç¢ºç«‹
- [x] api-contracts ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã‚ˆã‚‹è²¬å‹™åˆ†é›¢
- [x] TypeScriptå¥‘ç´„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å®Ÿè£…
- [x] Goå¥‘ç´„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®æº–å‚™ï¼ˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆæ¸ˆã¿ï¼‰

### ãƒ•ã‚§ãƒ¼ã‚º2: ä¸¦è¡Œé–‹ç™ºæœŸé–“

- [ ] Goç‰ˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ä¸¦è¡Œé–‹ç™º
- [ ] Goã‚³ãƒ¼ãƒ‰ç”Ÿæˆãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³æ§‹ç¯‰
- [ ] æ®µéšçš„ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆç§»è¡Œ

### ãƒ•ã‚§ãƒ¼ã‚º3: å®Œå…¨ç§»è¡Œ

- [ ] TypeScriptç‰ˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å»ƒæ­¢
- [ ] Goç‰ˆã¸ã®å®Œå…¨åˆ‡æ›¿
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ»ãƒ¡ãƒ¢ãƒªæœ€é©åŒ–

## ç§»è¡Œã®åˆ©ç‚¹

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Š

- **ãƒ¡ãƒ¢ãƒªåŠ¹ç‡**: Go â†’ 2-10å€åŠ¹ç‡çš„
- **ä¸¦è¡Œå‡¦ç†**: ã‚´ãƒ«ãƒ¼ãƒãƒ³ â†’ é«˜ã„ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆ
- **èµ·å‹•é€Ÿåº¦**: ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ¸ˆã¿ãƒã‚¤ãƒŠãƒª â†’ å³åº§èµ·å‹•

### é‹ç”¨ã‚³ã‚¹ãƒˆå‰Šæ¸›

- **ã‚·ãƒ³ã‚°ãƒ«ãƒã‚¤ãƒŠãƒª**: Dockerè»½é‡åŒ–
- **ä½ãƒªã‚½ãƒ¼ã‚¹æ¶ˆè²»**: ã‚µãƒ¼ãƒãƒ¼ã‚³ã‚¹ãƒˆå‰Šæ¸›
- **ãƒ‡ãƒ—ãƒ­ã‚¤ç°¡ç´ åŒ–**: ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ä¾å­˜ãªã—

### å‹å®‰å…¨æ€§ç¶­æŒ

- **OpenAPIå¥‘ç´„**: è¨€èªéä¾å­˜ã®å‹å®‰å…¨æ€§
- **ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ãƒã‚§ãƒƒã‚¯**: Goå¼·å‹ã‚·ã‚¹ãƒ†ãƒ 
- **ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚¨ãƒ©ãƒ¼å‰Šæ¸›**: structã‚¿ã‚°ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

## æ³¨æ„ç‚¹ãƒ»è€ƒæ…®äº‹é …

### é–‹ç™ºãƒãƒ¼ãƒ è€ƒæ…®

- **å­¦ç¿’ã‚³ã‚¹ãƒˆ**: Goã‚¹ã‚­ãƒ«ã®ç¿’å¾—å¿…è¦
- **ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ **: TypeScript â†’ Goç§»è¡Œ
- **ãƒ‡ãƒãƒƒã‚°ãƒ»ãƒ†ã‚¹ãƒˆç’°å¢ƒ**: ãƒ„ãƒ¼ãƒ«ãƒã‚§ãƒ¼ãƒ³å¤‰æ›´

### æ¼¸é€²çš„ç§»è¡Œ

- **Critical path**: é‡è¦APIã‹ã‚‰æ®µéšçš„ç§»è¡Œ
- **A/Bãƒ†ã‚¹ãƒˆ**: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¯”è¼ƒæ¤œè¨¼
- **ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯è¨ˆç”»**: å•é¡Œæ™‚ã®è¿…é€Ÿå¾©æ—§

ã“ã®æˆ¦ç•¥ã«ã‚ˆã‚Šã€ç¾åœ¨ã®é–‹ç™ºåŠ¹ç‡ã‚’ç¶­æŒã—ãªãŒã‚‰ã€å°†æ¥çš„ãªGoç§»è¡Œã¸ã®é“ç­‹ã‚’ç¢ºä¿ã§ãã¾ã™ã€‚
